# Standard upstream HTTP/1.1
proxy_http_version 1.1;

# Preserve original request context
proxy_set_header Host              $host;
proxy_set_header X-Real-IP         $remote_addr;
proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;
proxy_set_header X-Forwarded-Host  $host;
proxy_set_header X-Forwarded-Port  $server_port;

# Sensible timeouts (override per location if you need longer)
proxy_connect_timeout   5s;
proxy_send_timeout     60s;
proxy_read_timeout     60s;
send_timeout           60s;

# Buffering: ON by default; turn OFF only where streaming is needed (WS/SSE) per location.
proxy_buffering on;

# Caching default: off here; enable explicitly per location when safe.
# proxy_cache app_cache;

# Large uploads: disable request buffering per location when needed
# proxy_request_buffering off;
